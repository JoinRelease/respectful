var TwilioDevice;

TwilioDevice = (function() {
  function TwilioDevice() {
    this.initTwilioDeviceBindings();
    this.initFormBindings();
  }

  TwilioDevice.prototype.initTwilioDeviceBindings = function() {
    var twilio_device, twilio_token;
    twilio_token = $('#twilioToken').data('token');
    twilio_device = Twilio.Device;
    twilio_device.setup(twilio_token, {
      debug: true
    });
    twilio_device.ready(function() {
      return $("#log").text("Ready");
    });
    twilio_device.error(function(error) {
      return $("#log").text("Error: " + error.message);
    });
    twilio_device.connect(function(conn) {
      return $("#log").text("Successfully established call");
    });
    return twilio_device.disconnect(function(conn) {
      return $("#log").text("Call ended");
    });
  };

  TwilioDevice.prototype.initFormBindings = function() {
    $('#caller').bind("click", function(event) {
      var params;
      params = {
        "phone_number": $('#phoneNumber').val()
      };
      return Twilio.Device.connect(params);
    });
    return $('#hangup').bind("click", function(event) {
      return Twilio.Device.disconnectAll();
    });
  };

  return TwilioDevice;

})();

// ---
// generated by coffee-script 1.9.2
